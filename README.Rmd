---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)

require(stpvers)
```

# stp25output

Die Scripten dienen der Erstellung von Reports als HTML aber auch von PDF ueber knit.
Zum Teil handelt es sich um modifizerte Funktionen von  R2HTML, texreg und htmlTable.

Overview
--------


* Initialisiert von neuen Projekten
   + `Projekt()` und `End()` Initialisiert ein neues Projekt und aufruf der HTML-Seite mit Hilfe von R2HTML.
   + `HTML_Start()` und `HTML_End()` Wie Projekt aber ohne den ganzen Ãœberhau von R2HTML.
* Text und Tabellen-Formatierung
   + `Output` Erstellt Tabellen
   + `Text`, `HTML_P` und `HTML_...` Schreibt HTML Text.

* Hilfsfunktionen
   + `SaveDate` Speichert Bilder in den Arbeitsfolder.
   +  `fix_irgendwas`  Repariert Levels und Labels und Zahlen fuer die Ausgabe.
   +  `set_my_options` und `get_my_options` Formatierungs-Optionen



## Output formats


Output formats| which_output  |default |asis | markup |default + text| asis + markup
--------------|---------------|--------|-----|--------|--------------|---------
html_document | markdown_html |-       | Ok  |-       |txt           | OK (MD)
word_document | word          | -      |-    | Ok     |txt           | OK (MD)
pdf_document  | markdown      | OK     |-    | Ok     |txt           | OK 
rtf_document  | text          | -      |-    |-       |txt           | OK  (MD)
odt_document  | text          | -      |-    |-       |txt           | OK  (MD)
beamer_presentation |markdown | - |OK  |-       |txt           | OK 
md_document   | markdown_html |-       | -  |-       |-           | -
tufte::tufte_html |markdown_html|-     | nur Tabelle  |-       |-           | OK


### Usage





```{r, results='asis'}
get_my_options()$output
which_output()

dat<- data.frame(
term = c("A", "B", "C", "D"),
n = c(23, 14, 56, 2),
m = c("4.7 (2.4)", "4.1 (2.3)", "8.9 (3.6)", NA)
) 


 

 #dat %>% Output()

dat  %>% Output(output="html")
#dat  %>% Output(output="word")
dat  %>% Output(output="latex")
dat  %>% Output(output="text")
dat  %>% Output(output="xxxx")
```






```{r , results='asis'}
get_my_options()$output
which_output()
 Tabelle2(hkarz,  tzell, lai, gruppe, APA=TRUE,  output = "html" )


```

```{r, results='asis'}
 res<-  Tabelle(hkarz,  tzell, lai, gruppe, APA=TRUE)
  Output(res, add_row =c("<b>Erste Zeile</b>" = 1, "Dritte Zeile" = 3),  output = "html" )
```



```{r, results='markup'}
# devtools::install_github("stp4/stp25output")
get_my_options()$output
which_output()
Projekt("markdown", "Beispiel Projekt")
get_my_options()$output
which_output()

set_my_options(prozent=list(digits=c(1,0), style=2))
# Optionen format:  HTML, Spin, Knit, Rpres oder Text
APA2(.~ gruppe , hkarz, caption="Deskriptive Analyse")

End()

```



```{r}
get_my_options()$output
which_output()

```


```{r, include = FALSE}

df1 <- data.frame(
term = c("A", "B", "C", "D"),
n = c(23, 14, 56, 2),
m = c("4.7 (2.4)", "4.1 (2.3)", "8.9 (3.6)", NA)
)



```





```{r df-default}
#+ 
df1 %>% Output()


df1 %>% Output(output=TRUE)

df1 %>% Output(output=FALSE)

```




```{r df-false ,  results='asis'}

df1 %>% Output(output="html")

```



```{r df-text, results='markup'}
#+
df1 %>% Output(output="text")

```

```{r,results='asis'}
 
df1 %>% Output(output="markdown")
```


##  xtable

```{r, results='asis'}

require(xtable)
data(tli)
## Demonstrate aov
fm1 <- aov(tlimth ~ sex + ethnicty + grade + disadvg, data = tli)
 fm1.table <- xtable(fm1)
 Output(fm1.table, output="html")
 

```


```{r , results='markup'}
 
 fm2 <- lm(tlimth ~ sex*ethnicty, data = tli)
 fm2b <- lm(tlimth ~ ethnicty, data = tli)
 
 Output(xtable(anova(fm2b, fm2)), output="markup")

```



##  knitr::kable


```{r}
 knitr::kable(
          df1, row.names = FALSE,
          format = "pandoc" 
        )
```



```{r}

knitr::kable(
  df1, row.names = FALSE,
  format = "markdown" 
)

```


```{r}
 knitr::kable(
          df1, row.names = FALSE,
          format = "pandoc" 
        )
```





### Grafik settings


```{r}
require(stpvers)
set.seed(2)
n <- 20 * 3 * 2
DF <- data.frame(
  n = runif(n, min = 1, max = 5),
  e = runif(n, min = 1, max = 5),
  o = runif(n, min = 1, max = 5),
  g = runif(n, min = 1, max = 5),
  a = runif(n, min = 1, max = 5),
  treatment = gl(3, n / 3, labels = c("UG1", "UG2", "KG"))[sample.int(n)],
  sex = gl(2, n / 2, labels = c("male", "female"))
)

```

```{r fig-default, fig.height=3, fig.width=4}
set_lattice()
bwplot2(e ~ treatment,
        DF,
        groups = sex,
        auto.key = list(columns = 2))
```




```{r fig-ggplot, fig.height=3, fig.width=4}

set_lattice_ggplot()
bwplot2(e ~ treatment,
        DF,
        groups = sex,
        auto.key = list(columns = 2))


```



```{r fig-bw, fig.height=3, fig.width=4}
set_lattice_bw()
bwplot2(e ~ treatment,
        DF,
        groups = sex,
        auto.key = list(columns = 2))


reset_lattice()
```





